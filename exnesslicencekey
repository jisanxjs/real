(function () {
    // Function to create the popup
    function createPopup() {
        const popupHTML = `
            <div id="customPopup" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; height: 500px; padding: 30px; background: green; box-shadow: 0 0 20px rgba(0, 0, 0, 0.3); border-radius: 15px; text-align: center; z-index: 1000;">
                <div style="margin-bottom: 20px; animation: fadeIn 1s;">
                    <h2 id="ownerText" style="font-size: 24px; font-weight: bold; background: linear-gradient(90deg, red, green, blue); -webkit-background-clip: text; color: transparent; animation: rgbGrow 3s infinite;">Owner: Jisan X</h2>
                </div>
                <p style="font-size: 16px; margin-bottom: 20px; color: #fff; animation: fadeIn 1.5s;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/60/Telegram_2019_logo.svg" alt="Telegram Logo" style="width: 30px; height: 30px; vertical-align: middle; margin-right: 10px;">
                    <span style="background: linear-gradient(90deg, #ff7e5f, #feb47b); -webkit-background-clip: text; color: transparent; animation: rgbGrow 3s infinite;">Telegram:</span> 
                    <a href="https://t.me/treader_jisan" target="_blank" style="color: white; text-decoration: none;">@treader_jisan</a>
                </p>
                <div style="animation: fadeIn 2s;">
                    <input type="text" id="licenseKey" placeholder="Enter your license key here" style="padding: 15px; width: 90%; margin: 20px 0; border: 1px solid #ddd; border-radius: 5px;">
                    <button id="confirmButton" style="padding: 15px 30px; margin: 10px; background: white; color: green; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;">Confirm</button>
                </div>
                <button id="backButton" style="padding: 10px 20px; background: red; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; position: absolute; top: 10px; right: 10px;">Back</button>
            </div>
        `;

        const popupContainer = document.createElement('div');
        popupContainer.innerHTML = popupHTML;
        document.body.appendChild(popupContainer);

        // Add event listeners to buttons
        document.getElementById('confirmButton').addEventListener('click', verifyLicenseKey);
        document.getElementById('backButton').addEventListener('click', closePopup);

        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes fadeIn {
                from { opacity: 0; transform: scale(0.9); }
                to { opacity: 1; transform: scale(1); }
            }

            @keyframes rgbGrow {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }
        `;
        document.head.appendChild(style);

        changeTextColor();
    }

    // Function to verify license key
    function verifyLicenseKey() {
        const licenseKeyInput = document.getElementById('licenseKey').value;

        if (licenseKeyInput === "EYGFKK") {
            alert("License key is valid! Welcome, Jisan X.");
            document.getElementById('customPopup').remove();

            (function () {
                function updateTextToReal() {
                    const elements = document.querySelectorAll(
                        '[data-test="account-info-trading-mode"], [data-test="navigation-panel"] [data-test="account-info-trading-mode"]'
                    );

                    elements.forEach((element) => {
                        if (element.textContent.trim() === "Demo") {
                            element.textContent = "REAL";
                            element.style.color = "#ffde02";
                        }
                    });
                }

                // Observer to handle dynamic content
                const observer = new MutationObserver(() => {
                    updateTextToReal();
                });

                observer.observe(document.body, {
                    childList: true,
                    subtree: true,
                });

                document.addEventListener("DOMContentLoaded", function () {
                    updateTextToReal();
                });
            })();
        } else {
            alert("Invalid license key. Please try again.");
        }
    }

    // Function to close the popup
    function closePopup() {
        const popup = document.getElementById('customPopup');
        if (popup) {
            popup.remove();
        }
    }

    // Function to change text color randomly
    function changeTextColor() {
        const colors = ['white', 'lightpink', 'lightblue', 'lightcoral', 'lightsalmon'];
        const ownerText = document.getElementById('ownerText');

        setInterval(() => {
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            ownerText.style.color = randomColor;
        }, 1000);
    }

    // Call the function to display the popup
    createPopup();
})();
